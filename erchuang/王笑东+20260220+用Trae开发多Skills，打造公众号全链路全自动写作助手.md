---
source_url: "https://mp.weixin.qq.com/s/leNqwQ1N03-0BBa4860Lyg?scene=1&click_id=2"
target_author: "王笑东"
source_title: "手把手教你开发“公众号文章生成器”Skill —— 从零开始打造全自动写作助手"
source_author: ""
rewrite_date: "2026-02-20"
---

## 正文

隔了好几个月没写文章了，AI又发生了翻天覆地的变化，claude code、skills、openclaw...
openclaw是最近火起来的AI产品，我也在本地部署体验了一下，的确是一项又上了一个台阶的产品，但是还存在不少问题（token消耗大，安全问题等）。等待后面迭代升级或出现替代产品的，可以不用着急跟风。

这篇文章我写skills，是因为它是这些新出的AI产品的核心技术。
而且我近几个月实际也是用这项技术在做传统商家的代运营项目（这个再另外做一篇文章写）。

下面的三个章节内容就是我用这5个skills，在trae上去完成的。

我先讲一下skills这项技术为什么特别的重要。
skills是**提示词工程的升级版**。为什么这么说？
看一下提示词工程的缺陷是什么？而skills是如何弥补这个缺陷的？

提示词工程的缺陷在于无法满足上下文越来越庞大这一现实问题。你指望在一个user prompt里面把你需要投喂给大模型的资料给塞满。
一方面大模型的输入容量是有限的，有可能会超出容量；
一方面就算都投喂进去了，由于内容太多了，大模型抓不住重点，很难达成理想的输出效果；
还有一个更严重的隐性问题，就是没办法**标准化**，从而没办法做出更加精细化的动作。而这一条才是AI agent能商业落地的关键。

我们来拿电脑举例（为了理解，这个例子不一定恰当），电脑CPU就类似AI大模型，内存+硬盘就是存放需要处理上下文的地方，我们操作电脑的人就是AI agent。

提示词工程就是只有CPU+内存的配置的电脑，所有要处理的东西一次性全部从内存读取，然后交给CPU来处理。
由于所有东西都在一起，你没办法重复使用里面的一些资料，所以没办法标准化，那么你当然就没办法去更加精细化的处理这些资料了。整个效率非常低下。

而skills技术就像有CPU+内存+硬盘的配置，我处理东西，需要什么就从硬盘里面打开，那么这个资料就会暂时到内存里面，更方便的让CPU处理，不需要了我就关上，这个资料就会从内存退出，保存到硬盘里面去。
那么理论上，我可以通过这种调用的方式处理无穷的数据、资料，而每份数据、资料我都可以单独去处理，只有这样的配置，电脑才能真正的帮助我们去完成各种任务。

skills具体是怎么做的：**三层信息加载。**

![](./王笑东+20260220+用Trae开发多Skills，打造公众号全链路全自动写作助手/pic2.jpg)

### 第一层：元数据（启动时加载）

只加载 Skill 的"名片"：名字和描述。
比如：
`name: "wechat-erchuang-system"
`description: "按指定作者风格对公众号文章做二创创作，并落盘到 erchuang/。用户提供作者名+文章链接或文章文档（txt或md格式）时调用。"

每个 元数据大约占 100 个 token。
AI agent 靠这个判断"需要调用哪个skills"。

### 第二层：指令（触发时加载）
这部分才是核心指令SKILL.md ：明确规定AI具体怎么做、分几步、有什么注意事项。

### 第三层：资源（按需加载）
这个部分在SKILL.md末尾引入，比如：
`## 参考文档
- `.trae\skills\wechat-typesetting\themes.md` - 选择模板风格
- `.trae\skills\wechat-typesetting\html-guide.md` - 生成html指引

这里可能是参考资料，可能是具体的示例，也可能是可执行的脚本。
这些内容不会直接出现在skill.md中，因为它们只在需要的时候加载，不需要的时候放在那里，始终不会被读取，不占用上下文空间。
这就是**渐进式加载**。省 token，也让 AI 更专注。

为什么现在COZE（dify、n8n）工作流类的产品用的人越来越少了呢？我从25年10月份之后，就慢慢很少使用了。
最大的问题是COZE类产品的**容错率特别低**，大量的时间都用在了建管道（搭建+配置）上了，由于节点比较多，非常容易就出问题跑不通，根本没办法商用。
而AI编程（claude code、cursor、trae等）+skill，AI直接**帮你建管道**，而且跑通一次之后，skills+AI共同确**保容错率非常高**，基本上不会出什么问题。
你可以真正的做到复现，这样你才可以把精力放在更重要的**专业深耕细作**上面去，把70分的业务流程逐不断的优化到90分甚至99分。

下面文章正式开始，本篇文章分为以下三个部分：

#### 一、为什么把5个skill做成全链路闭环？
#### 二、把 5 个 Skill 拆开讲清楚：输入是什么、输出是什么、为什么这么设计。  
#### 三、结尾


---

## 一、为什么把5个skill做成全链路闭环？

很多人对“自动化写作”的理解停留在：用 AI 写一篇文章。

这其实是把 AI 当成“写字的机器”。

但公众号写作真正耗时的地方，往往不是“打字”，而是：

1、素材收集：找原文、找数据、找对标；  
2、结构梳理：什么先说，什么后说，逻辑怎么推进；  
3、风格校准：同一个观点，不同作者写出来的味道完全不同；  
4、配图：找图、做图、传图；  
5、排版与发布：微信后台的各种限制，图片域名限制，样式被重置，来回调。  

你会发现，这是一个“多环节系统工程”，不是一个“写字动作”。

必须是**全链路提效**。

也就是说：

- 不是把某一步做到 99 分，而是把每一步做到 70 分以上，然后让它们能串起来跑。
- 不是追求某个环节的极致，而是追求整条链路的闭环。

![](./王笑东+20260220+用Trae开发多Skills，打造公众号全链路全自动写作助手/pic3.jpg)

其实不止是公众号，所有的商业运营、管理，都是需要做到**全链路**的，这么做的好处就是**先跑通，然后你就可以不紧不慢的去优化每个环节了，否则，你更多的时间会花在建通道（和运营、管理本身无关的事情上）上面，你很难做到精细化**。
所以只有做到了全链路，才是AI agent真正的商业化落地，这也是“一人公司”成立的前提。
下面可以看一下我做的公众号全链路业务流程图，感受一下业务闭环之后，是不是让我们的精力只需要放在运营本身了，而不用操心与此无关的事情。

![](./王笑东+20260220+用Trae开发多Skills，打造公众号全链路全自动写作助手/pic1.jpg)

可以看到这里面一环扣一环，用户只需要输入必要的一些信息即可（还是半自动，离全自动只一步之遥），更多的时间花在，对输出内容进行检查，然后反馈给agent进行skill的优化，或自己手动优化。
下面看看这5个skill具体是如何实现的。

---

## 二、5 个 Skill 拆解：逻辑、输入输出、关键节点

#### 1）wechat-link-extract：批量采集公众号文章，变成样本库

这一步解决的是“如何采集样本，搭建素材库”的问题。

Skill 的元数据描述：
`description:批量打开公众号文章链接，提取标题/作者/时间/正文，写入本地 Markdown，并同步到飞书多维表格。

它的业务流程，本质就是把公众号文章“抽成结构化数据”：

0）用户批量输入公众号文章链接（同一个作者的文章）
1）调用mcp：`Chrome-DevTools-MCP`，打开链接（复用同一个 Chrome tab）；  
2）模仿真人操作，滚动触发懒加载；  
3）提取字段：`标题、作者、公众号、发布时间、正文全文`；  
4）落盘：`imitation_article/<作者名>+<标题>.md`；  
5）调用mcp：`lark-mcp`，写入飞书多维表格，作为长期素材库。  

这里有三个可以说的点：

第一，调用mcp（Chrome DevTools MCP或Agent Browser），你提需求，它模拟人来操作浏览器，这个极大的降低了门槛，用它来提取比如电商数据，比用rpa方便多了。  

第二，落盘统一格式并指定存储位置。你一旦把样本格式统一（作者名+标题），后面的风格拆解skills查找+分析就会非常丝滑。

第三，调用mcp（lark-mcp），需要到飞书开放平台（https://open.feishu.cn/），创建一个机器人应用，并添加相关权限，然后在trae添加mcp（具体教程可自行搜索）。的确很方便，可以把你采集的各种数据自动导入到飞书多维表格。

如果你做的是“长期写作”，我强烈建议把飞书多维表格也接上。

原因很简单：本地文件适合归档，表格适合检索、筛选、复盘、统计。

这一步做好了，你就拥有了“作者样本库”。

![](./王笑东+20260220+用Trae开发多Skills，打造公众号全链路全自动写作助手/pic4.jpg)

下面开始第二个 Skill。

---

#### 2）wechat-imitation-system：从样本库提炼作者风格模型

第二步就是：风格建模。

这个 Skill 的工作很明确：
`description:用户只需要输入<作者名>，agent会自动读取 `imitation_article/` 里同一作者多篇文章，交叉提取稳定特征，生成 style/<作者名>文章风格分析与模仿系统.md。

这里的输出强制使用 JSON 代码块，把风格拆成“宏观+微观”两层，再给“综合模仿指南”。

为什么要 JSON？

因为 JSON 是给“后续的 AI”看的。

你不是写一篇文章，你是在搭系统。系统需要结构化的风格模型，才能被下游 Skill 稳定调用。

这一步的价值是：把“模仿”变成工程。

做完之后，你就有了：

1）作者风格概要（风格核心定义、稳定性、适应性）；  
2）跨文本恒定特征（思维、结构、语言）；  
3）主题相关适应特征（教程类怎么写、观点类怎么写）；  
4）可执行的模仿步骤与检查清单。  

一句话：你把“某某作者怎么写”变成了一份可复用的结构化风格模型。

下面开始第三个 Skill。

---

#### 3）wechat-erchuang-system：按作者风格，把内容写出来

第三步才进入“写文章”。

但注意：这里的写不是从零写，而是“基于输入内容做二创”。

比如本篇文章的需求是：
`用【王笑东】的文章风格，再参考我提供的文档，创作《用 Trae 开发多 Skills，打造公众号全链路全自动写作助手》这个选题。

这类文章属于“教程+框架+落地路径”，很典型的我写作风格适配场景。

这个 Skill 的核心逻辑是：

0）用户输入需模仿的作者名、需要二创的公众号文章链接或文章文档（txt或md格式）以及其他要求
1）agent自动到`imitation_article/`文件夹读取 `style/<作者名>文章风格分析与模仿系统.md`（风格模型）；  
2）agent调用mcp（Chrome DevTools MCP）读取采集文章 `imitation_article/<作者名>+*.md`（补微观句式与惯用表达）；  
3）然后agent根据以上内容及用户要求来撰写文章；  
4）最后落盘到 `erchuang/<作者名>+<YYYYMMDD>+<二创标题>.md`。  

你会发现，第三步的本质不是“写作”，而是“结构化重组”。

agent把我的文章结构拆成：

- 开头痛点+解决方案；  
- 目录（本文分为三部分/四部分）；  
- 主体，解决方案教程（按步骤、按模块、按清单推进）；  
- 结尾（总结 + 下一步行动）。  

![](./王笑东+20260220+用Trae开发多Skills，打造公众号全链路全自动写作助手/pic5.jpg)

这种结构非常适合把复杂系统讲清楚，同时又能保持阅读节奏。

所以深度文章的门槛不是深，而是清楚。

只要你能把逻辑讲清楚，它就有深度。

这里还有一个可以说的点：对于二创后的文章如何再编辑的问题，我使用的是**Obsidian**，这个软件的好处是可以直接读取本地文档进行编辑。我就是直接在这个软件里面进行编辑的。
而且这个软件里面有丰富的第三方插件，比如模板插件和发布插件等，我可以在这个软件里面直接完成编辑和发布的动作（和下面第5个skill功能一样的）

下面开始第四个 Skill。

---

#### 4）gemini-image：给文章自动配图，并落盘到文章目录

公众号文章的配图有两种完全不同的需求：

1）封面图：需要高点击率，要“吸引人点开”；  
2）正文配图：需要“帮助理解”，尤其是流程、框架、对比、清单。  

很多人配图是“找一张好看的图”，但深度文章更需要“可视化关键概念”。

用户只需要告诉agent：`对erchuang/文件夹的哪篇md文档进行配图即可。

这个 Skill 的设计就很工程化，指挥agent采取以下行动：

第一步读取apikey（\config\secrets.md）；  
第二步解析文章内容，提取核心论点与可视化机会；  
第三步自动选择与文章匹配的图片类型与风格（type×style 兼容矩阵），并生成文生图提示词；  
第四步调用第三方平台api接口用banana pro生成相应的图片（返回的是图片链接）。
第五步将图片链接按markdown格式插入文章，同时把图片链接转换为文件下载落盘（在erchuang/文件夹自动创建与文档同名的文件夹）：封面图：`cover.jpg`，正文配图： `pic1.jpg...picn.jpg`。  

这里配图的提示词做了以下强调：

如果文章用了比喻，不要按字面意思配图，要可视化底层概念。

比如你说“电锯切西瓜”，你配图不能画电锯和西瓜，你要画的是“工具与任务不匹配的效率浪费”。

这就叫“配图也要讲逻辑”。

另外，把图片落盘到文章同名目录，是为了给下一步“微信上传”做准备。

微信的图片链路很现实：正文里的图片必须是微信认可的 URL（通常是 `mmbiz.qpic.cn`），所以你必须先有本地图片文件，再上传到微信，再替换链接。

这就是闭环。

下面开始第五个 Skill。

---

#### 5）wechat-typesetting：从 Markdown 到微信 HTML，再到草稿箱

最后一步，是很多人最痛苦的一步：排版 + 上传。

你如果用云端的编辑软件去编辑（比如秀米、notion等），其实是有很多不方便的，懂得都懂（其实刚才我说的Obsidian这个软件已经解决了这方面的痛点，但是为了演示skill的全链路，我这里还是用agent去完成这一步）

另外微信编辑器的限制非常多：

- `<body>` 的样式会被剥离；  
- 很多 CSS 属性不支持；  
- 一些标签会被过滤；  
- 图片 `src` 必须是微信域名；  
- `<p>` 的颜色还会被强制重置。  

所以这个 Skill 的价值，就是把这些坑全封装起来。

用户只需要输入：`文章md文档所在的文件夹地址和需要排版的文章md即可。

agent执行分两段：

第一段：Markdown → 微信兼容 HTML（内联样式），并且要“选主题”。  

这里你已经做了优化：先分析文章内容，再从 6 个模板里自动选择一个匹配的主题（默认 `auto`），比如：

- 工具清单/教程 → 字节范  
- 观点叙事长文 → 苹果范  
- 传统文化 → 中国风  
……

然后生成 HTML 时，关键规则是：

1）所有 CSS 必须内联；  
2）只用安全标签；  
3）图片先用占位符 `<!-- IMG:x -->`；  
4）主容器必须在正文最外层立刻创建，承载全局样式。  

![](./王笑东+20260220+用Trae开发多Skills，打造公众号全链路全自动写作助手/pic6.jpg)

第二段：调用公众号 API，把内容上传到草稿箱。

1）获取APPID、APPSECRET：\config\secrets.md；  
2）在erchuang/文件夹自动创建与文档同名的文件夹内获取cover.jpg，上传封面图拿到 `thumb_media_id`；  
3）在erchuang/文件夹自动创建与文档同名的文件夹内获取pic1.jpg、......picn.jpg，上传正文配图拿到微信 URL；  
4）把 HTML 里的 `<!-- IMG:x -->` 替换成微信 URL，调用“新建草稿”接口保存草稿箱。  

到这里，你就完成了真正意义上的“全链路闭环”：

---

## 三、结尾

我使用的是trae完成的以上所有任务，包括创建skill，为什么没用claude code这个更优秀的软件呢？是因为对于我来说，这个门槛还是高了，我没办法既钻研技术（建管道），又钻研专业。
用trae刚刚好，我是觉得我们没有必要特别的去追求技术上的领先（AI进化太快了，很难跟上），而忘了专业的重要性。
我这次做的skill很多使用的是我之前搭建COZE工作流所使用到的思路和提示词，所以技术可以被淘汰，但是思路和专业不会被淘汰。
创建skill的过程，很多技术部分，还是在公众号里面去搜索找到的，你可以不知道技术具体怎么实现的，但是还是需要知道技术实现的路径是什么。
我的这一套skills可以通过下面链接去查看
https://github.com/allentry/wechat-skills

欢迎点赞、转发、在看给我鼓励。  
👇👇关注我👇👇  
加我微信：wangxiaodong17ai  
