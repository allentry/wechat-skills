---
name: gemini-image
description: 当用户想要根据文章内容生成文章配图，根据文章内容进行AI作画，并将图片链接植入到文章中时使用此 Skill。支持文生图。
---

# Gemini 图像生成

当用户希望为一篇文章配图片的时候，使用此 Skill。

## 调用步骤

### 1. 读取配置
- 读取 `.trae\skills\gemini-image\config\secrets.md` 获取 API Key

### 2. 构造 prompt

#### 1.用户输入文章内容
用户指定erchuang/文件夹内的一篇文章内容（md文档）作为输入
#### 2.解析文章内容与图片设置
2.1分析内容
| 分析项   | 描述                 |
| ----- | ------------------ |
| 内容类型  | 技术 / 教程 / 方法论 / 叙事 |
| 配图目的  | 信息传达 / 可视化 / 想象力   |
| 核心论点  | 需要可视化的 2-5 个要点     |
| 可视化机会 | 插图能增加价值的位置         |
| 推荐类型  | 基于内容特征和目的          |
| 推荐密度  | 基于长度和复杂度           |
2.2 提取核心论点
主要论点
读者需要理解的关键概念
对比/比较
提出的框架/模型
关键：如果文章使用比喻（如"电锯切西瓜"），不要按字面意思配图。可视化底层概念。
2.3 确定位置
需要配图：
核心论点（必须）
抽象概念
数据对比
流程、工作流

不需要配图：
字面意义的比喻
装饰性场景
通用插图
2.4 基于分析推荐图片类型
2.4.1 图片类型（type）推荐
infographic、scene、flowchart、comparison、framework、timeline
2.4.2 图片风格（style）推荐
2.4.1和2.4.2选择基于 类型（type） × 风格(style) 兼容性矩阵（查看文档.trae\skills\gemini-image\styles\styles.md）
2.4.2 图片数量推荐
minimal（2-3张）- 仅核心概念（第一张为封面图，其他为文章配图）
balanced（3-5张）- 主要章节（第一张为封面图，其他为文章配图）
per-section（每节至少1张）（推荐）（第一张为封面图，其他为文章配图）
rich（6张以上）- 全面覆盖（第一张为封面图，其他为文章配图）

#### 3.提示词构建指南
3.0 封面图提示词：
# Role: 公众号封面视觉设计专家
## Profile
- **Description:** 你是一位精通新媒体视觉传播的设计师，专注于根据输入内容生成高点击率的公众号封面图。你擅长捕捉用户注意力，通过精准的视觉风格匹配和强烈的视觉对比来提升内容的打开率。
## Goals
根据用户提供的内容和风格偏好，设计并生成一张符合以下所有规范的公众号封面图。
## Constraints & Guidelines
### 1. 视觉风格 (Style Options)
- **风格选择:** 请根据内容调性或用户指定，从以下风格库中选择最合适的一种：
  - **[扁平插画风]:** 适合职场、干货、教育类，色彩明快，信息清晰。
  - **[3D C4D立体风]:** 适合科技、商业、电商类，质感高级，光影丰富。
  - **[实景/拼贴风]:** 适合新闻、情感、人物访谈，真实感强，拼贴艺术处理。
  - **[手绘/涂鸦风]:** 适合生活、吐槽、亲子类，轻松活泼，亲和力强。
  - **[极简抽象风]:** 适合文艺、思考、高端品牌，大量留白，意境深远。
  - **[波普/复古风]:** 适合营销、热点、潮流类，高饱和度，视觉冲击力极强。
- **尺寸比例:** 2.35:1（公众号封面标准尺寸）。
- **通用规范:** 无论选择何种风格，都必须色彩鲜明、对比强烈，确保在手机小尺寸预览时依然醒目。
### 2. 构图要求
- **布局:** 主视觉元素居中或偏左，右侧必须预留标题区域。
- **元素:** 添加 1-2 个简洁的核心视觉符号（图标/人物/道具）以增强记忆点。
- **版权处理:** 若涉及敏感或版权人物，必须使用风格相似的替代形象进行表达，**不得拒绝生成**。
- **留白:** 保持合理留白，突出核心信息，坚决避免画面拥挤。
### 3. 文字处理
- **标题:** 标题文字需大而醒目，严格控制在 8 字以内。
- **副标:** 可添加 1 行副标题或关键词标签。
- **字体:** 字体风格必须与选定的视觉风格协调统一。
### 4. 吸引力法则
- **钩子元素:** 使用悬念、数字、痛点等元素激发点击欲望。
- **视觉张力:** 视觉元素需夸张且有反差。
- **配色参考:** 参考爆款封面配色（如橙黄、蓝紫、红黑等高对比组合）。
### 5. 语言
- 除非另有说明，默认使用中文进行文字生成。
## Workflow
1. 根据用户输入的内容，确定核心主题和情感基调。
2. **选择风格:** 自动匹配[视觉风格]库中最能提升点击率的一种风格。
3. 根据[构图要求]规划画面布局，确保右侧留白。
4. 结合选定风格与[吸引力法则]生成最终图像。


其他文章配图提示词要求如下：
3.1 构图要求
| 要求          | 描述                |
| ----------- | ----------------- |
| **简洁构图**    | 布局简单，无视觉杂乱        |
| **留白**      | 充足的边距，元素周围有呼吸空间   |
| **无复杂背景**   | 仅使用纯色或微妙渐变，避免繁杂纹理 |
| **居中或内容适配** | 主要视觉元素居中或根据内容需求定位 |
| **匹配图形**    | 使用与内容主题相符的图形元素    |
| **突出核心信息**  | 留白将注意力引向关键信息      |
添加到所有提示词：
简洁构图，大量留白。背景简单或无背景。主要元素居中或根据内容需求定位。
3.2 人物渲染
描绘人物时：
| 指南      | 描述              |
| ------- | --------------- |
| **风格**  | 简化的卡通剪影或符号化表达   |
| **避免**  | 写实的人物描绘、详细的面部特征 |
| **多样性** | 展示多个人物时体现不同的体型  |
| **情感**  | 通过姿态和简单手势表达情感   |
添加到所有含有人物的提示词：
人物：简化的风格化剪影或符号化表现，非照片写实。
3.3 插图中的文字
| 元素     | 指南              |
| ------ | --------------- |
| **大小** | 大号、醒目、立即可读      |
| **风格** | 优先使用手写体字体以增加温度感 |
| **内容** | 仅使用简洁的关键词和核心概念  |
| **语言** | 与文章语言保持一致       |
添加到含文字的提示词：
文字应大号醒目，使用手写风格字体。保持极简，聚焦关键词。
3.4 提示词原则
优秀的提示词必须包含：
布局结构优先：描述构图、区域、流向
具体数据/标签：使用文章中的实际数字和术语
视觉关系：元素如何连接
语义化颜色：基于含义的颜色选择（红色=警告，绿色=高效）
风格特征：线条处理、纹理、氛围
宽高比：16：9

3.5 类型特定模板
3.5.1 信息图infographic
[标题] - 数据可视化

布局：[网格/放射状/层级]

区域：
- 区域 1：[带具体数值的数据点]
- 区域 2：[带指标的对比]
- 区域 3：[总结/结论]

标签：[具体数字、百分比、文章中的术语]
颜色：[语义化颜色映射]
风格：[风格特征]
比例：16:9

3.5.2 信息图 infographic+ 矢量插画：
扁平矢量插画信息图。所有元素使用简洁的黑色轮廓。
颜色：奶油色背景 (#F5F0E6)、珊瑚红 (#E07A5F)、薄荷绿 (#81B29A)、芥末黄 (#F2CC8F)
元素：几何简化图标，无渐变，趣味装饰元素（圆点、星星）

3.5.3 场景图scene
[标题] - 氛围场景

焦点：[主体]
氛围：[光线、情绪、环境]
情绪：[要传达的情感]
色温：[暖色/冷色/中性]
风格：[风格特征]
比例：16:9

3.5.4 流程图flowchart
[标题] - 流程图

布局：[左到右/上到下/圆形]

步骤：
1. [步骤名称] - [简要描述]
2. [步骤名称] - [简要描述]
...

连接：[箭头类型、决策点]
风格：[风格特征]
比例：16:9

3.5.5 流程图flowchart + 矢量插画：
扁平矢量流程图，粗箭头和几何步骤容器。
颜色：奶油色背景 (#F5F0E6)，步骤使用珊瑚色/薄荷色/芥末色，黑色轮廓
元素：圆角矩形、粗箭头、每个步骤的简单图标

3.5.6 对比图comparison
[标题] - 对比视图

左侧 - [选项 A]：
- [要点 1]
- [要点 2]

右侧 - [选项 B]：
- [要点 1]
- [要点 2]

分隔：[视觉分隔符]
风格：[风格特征]
比例：16:9

3.5.7 对比图comparison + 矢量插画：
扁平矢量对比图，分割布局。清晰的视觉分隔。
颜色：左侧珊瑚色 (#E07A5F)，右侧薄荷色 (#81B29A)，奶油色背景
元素：粗体图标、黑色轮廓、居中分隔线

3.5.8 框架图framework
[标题] - 概念框架

结构：[层级/网络/矩阵]

节点：
- [概念 1] - [角色]
- [概念 2] - [角色]

关系：[节点如何连接]
风格：[风格特征]
比例：16:9

3.5.9 框架图framework + 矢量插画：
扁平矢量框架图，几何节点和粗连接线。
颜色：奶油色背景 (#F5F0E6)，节点使用珊瑚色/薄荷色/芥末色/蓝色，黑色轮廓
元素：圆角矩形或圆形作为节点，粗连接线

3.5.10 时间线timeline
[标题] - 时间轴视图

方向：[水平/垂直]

事件：
- [日期/时期 1]：[里程碑]
- [日期/时期 2]：[里程碑]

标记：[视觉指示器]
风格：[风格特征]
比例：16:9

3.6 应避免的内容
模糊描述（"一张好看的图片"）
字面意义的隐喻插图
缺少具体标签/注释
通用装饰元素

3.7 文字风格（含文字时）
所有文字必须为手绘风格
文字清晰可读，与视觉元素相得益彰
字体风格与插画风格协调统一
禁止使用写实或电脑生成字体

3.8 语言
文字元素使用与用户提供的文章内容相同的语言
标点符号风格与文章内容语言保持一致

3.9 提示词输出
在erchuang/文件夹内，创建一个新文件夹（文件夹名称与用户指定的md文档名称相同），将生成提示词以md文档的形式存储在该文件夹内
比如生成了N个提示词，则存储为：提示词1.md、......提示词N.md

### 3. 调用 API
生成N个提示词就调用N次API生成图片

```bash
curl -s -X POST "https://api.apicore.ai/v1/images/generations" \
  -H "Authorization: Bearer API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "gemini-3-pro-image-preview-4k",
    "prompt": "提示词",
    "size": "9:16",
    "n": 1
  }'
```

### 4. 返回结果

4.1从响应中提取 `data[0].url` ，将所有配图链接（url，封面图链接除外）插入到erchuang/文件夹内用户指定的文档md相应的位置上（markdown插入图片格式）。

4.2将链接转成图片存储在erchuang/文件夹里面（与用户指定的md文档名称相同的子文件夹内，封面图名称：cover.jpg，文章配图名称：pic1.jpg、......picn.jpg）

## 参考文档

- `.trae\skills\gemini-image\config\secrets.md` - apikey存储文档
- `.trae\skills\gemini-image\styles\styles.md` - 图片风格参考文档
